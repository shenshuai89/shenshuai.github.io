<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="北鸟南游, 前端开发设计师">










<meta name="description" content="前端，设计师">
<meta property="og:type" content="website">
<meta property="og:title" content="北鸟南游&lt;br&gt;前端开发设计师">
<meta property="og:url" content="http://shenshuai.me/page/2/index.html">
<meta property="og:site_name" content="北鸟南游&lt;br&gt;前端开发设计师">
<meta property="og:description" content="前端，设计师">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="北鸟南游&lt;br&gt;前端开发设计师">
<meta name="twitter:description" content="前端，设计师">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":5},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://shenshuai.me/page/2/">





  <title>北鸟南游<br>前端开发设计师</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">北鸟南游<br>前端开发设计师</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">web前端开发，设计师</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-首页">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-分类">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-关于">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-标签">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shenshuai.me/2019/06/20/vue样式class和style/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenshuai.me">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北鸟南游<br>前端开发设计师">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/20/vue样式class和style/" itemprop="url">vue样式class和style(二)</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-20T00:00:00+08:00">
                2019-06-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/前端开发/" itemprop="url" rel="index">
                    <span itemprop="name">前端开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="http://www.shenshuai.me/2019/06/18/vue基础入门一方法和数据" target="_blank" rel="noopener">第一篇：vue基础介绍，数据绑定(computed+watch)</a></li>
<li><a href="http://www.shenshuai.me/2019/06/20/vue样式class和style" target="_blank" rel="noopener">第二篇：vue样式class和style</a></li>
<li><a href="http://www.shenshuai.me/2019/06/22/vue组件及生命周期" target="_blank" rel="noopener">第三篇：vue组件及生命周期</a></li>
<li><a href="http://www.shenshuai.me/2019/06/24/vue父子组件之间的数据传递/" target="_blank" rel="noopener">第四篇：vue父子组件之间的数据传递</a></li>
<li><a href="http://www.shenshuai.me/2019/06/26/vue动画与过渡/" target="_blank" rel="noopener">第五篇：vue动画与过渡</a></li>
<li><a href="http://www.shenshuai.me/2019/06/28/vue-router路由的使用/" target="_blank" rel="noopener">第六篇：vue-router路由的使用</a></li>
<li><a href="http://www.shenshuai.me/2019/06/30/vuex数据管理/" target="_blank" rel="noopener">第七篇：vuex数据管理</a></li>
</ul>
<h4 id="Vue绑定html-class"><a href="#Vue绑定html-class" class="headerlink" title="Vue绑定html class"></a>Vue绑定html class</h4><p>在绑定对象是class的时候，表达式结果的类型出了字符串外还可以是对象或数组。</p>
<h5 id="对象语法"><a href="#对象语法" class="headerlink" title="对象语法"></a>对象语法</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:class</span>=<span class="string">"&#123; active: isActive, 'text-danger': hasError &#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">  isActive: <span class="literal">true</span>,</span><br><span class="line">  hasError: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>渲染结果：<div class="active text-danger"></div><br>绑定的对象可以在data中详细定义，也可以在计算属性中定义。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"classObject"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">data: &#123;</span><br><span class="line">  classObject: &#123;</span><br><span class="line">    active: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">'text-danger'</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>计算属性中返回的对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"classObject"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">data: &#123;</span><br><span class="line">  isActive: <span class="literal">true</span>,</span><br><span class="line">  error: <span class="literal">null</span></span><br><span class="line">&#125;,</span><br><span class="line">computed: &#123;</span><br><span class="line">  classObject: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      active: <span class="keyword">this</span>.isActive &amp;&amp; !<span class="keyword">this</span>.error,</span><br><span class="line">      <span class="string">'text-danger'</span>: <span class="keyword">this</span>.error &amp;&amp; <span class="keyword">this</span>.error.type === <span class="string">'fatal'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="数组语法"><a href="#数组语法" class="headerlink" title="数组语法"></a>数组语法</h5><p>可以给绑定的class后添加一个数组<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:<span class="class"><span class="keyword">class</span></span>=<span class="string">"[activeClass, errorClass]"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">data: &#123;</span><br><span class="line">  activeClass: <span class="string">'active'</span>,</span><br><span class="line">  errorClass: <span class="string">'text-danger'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>数组内放的是data数据对象。</p>
<p>数组可以根据条件切换列表中的 class，可以用三元表达式：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:class</span>=<span class="string">"[isActive ? activeClass : '', errorClass]"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>当有多个条件 class 时这样写有些繁琐。所以在数组语法中也可以使用对象语法：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:class</span>=<span class="string">"[&#123; activeClass: isActive &#125;, errorClass]"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>对象语法中，类名class在前，后边是判断。数组语法中，变量在前，后边跟的是类名。数组中可以再次放对象。<strong>对象名(类名)在前，数组数(数据)在前</strong></p>
</blockquote>
<h4 id="Vue添加style样式"><a href="#Vue添加style样式" class="headerlink" title="Vue添加style样式"></a>Vue添加style样式</h4><h5 id="对象语法-1"><a href="#对象语法-1" class="headerlink" title="对象语法"></a>对象语法</h5><p>v-bind:style的对象语法和css语法类似。因为这里的style是js对象，所以属性要写成驼峰式。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:style=<span class="string">"&#123; color: activeColor, fontSize: fontSize + 'px' &#125;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">data:&#123;</span><br><span class="line">    activeColor:<span class="string">'red'</span>,</span><br><span class="line">    fontSize:<span class="number">30</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用直接绑定一个样式对象，把样式信息数据写在data中，这样可以让模板更加清晰<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:style=<span class="string">"styleObject"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">data:&#123;</span><br><span class="line">    styleObject:&#123;</span><br><span class="line">          color:<span class="string">"red"</span>,</span><br><span class="line">          fontSize:<span class="string">"12px"</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="数组语法-1"><a href="#数组语法-1" class="headerlink" title="数组语法"></a>数组语法</h5><p>数组语法可以将<strong>多个样式对象</strong>应用到一个元素上.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:style=<span class="string">"[styleObject,baseStyles]"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">data:&#123;</span><br><span class="line">    styleObject:&#123;</span><br><span class="line">          color:<span class="string">"red"</span>,</span><br><span class="line">          fontSize:<span class="string">"12px"</span></span><br><span class="line">     &#125;,</span><br><span class="line">    baseStyles:&#123;</span><br><span class="line">          fontSize:<span class="string">"18px"</span>;</span><br><span class="line">          margin:<span class="string">"0px"</span>,</span><br><span class="line">          padding:<span class="string">"0px"</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shenshuai.me/2019/06/18/vue基础入门一方法和数据/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenshuai.me">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北鸟南游<br>前端开发设计师">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/18/vue基础入门一方法和数据/" itemprop="url">vue基础介绍，数据绑定(一)</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-18T00:00:00+08:00">
                2019-06-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/前端开发/" itemprop="url" rel="index">
                    <span itemprop="name">前端开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="http://www.shenshuai.me/2019/06/18/vue基础入门一方法和数据/" target="_blank" rel="noopener">第一篇：vue基础介绍，数据绑定(computed+watch)</a></li>
<li><a href="http://www.shenshuai.me/2019/06/20/vue样式class和style" target="_blank" rel="noopener">第二篇：vue样式class和style</a></li>
<li><a href="http://www.shenshuai.me/2019/06/22/vue组件及生命周期" target="_blank" rel="noopener">第三篇：vue组件及生命周期</a></li>
<li><a href="http://www.shenshuai.me/2019/06/24/vue父子组件之间的数据传递/" target="_blank" rel="noopener">第四篇：vue父子组件之间的数据传递</a></li>
<li><a href="http://www.shenshuai.me/2019/06/26/vue动画与过渡/" target="_blank" rel="noopener">第五篇：vue动画与过渡</a></li>
<li><a href="http://www.shenshuai.me/2019/06/28/vue-router路由的使用/" target="_blank" rel="noopener">第六篇：vue-router路由的使用</a></li>
<li><a href="http://www.shenshuai.me/2019/06/30/vuex数据管理/" target="_blank" rel="noopener">第七篇：vuex数据管理</a></li>
</ul>
<h2 id="Vue介绍"><a href="#Vue介绍" class="headerlink" title="Vue介绍"></a>Vue介绍</h2><h4 id="Vue和传统的DOM开发的区别"><a href="#Vue和传统的DOM开发的区别" class="headerlink" title="Vue和传统的DOM开发的区别"></a>Vue和传统的DOM开发的区别</h4><blockquote>
<p>​        在传统的开发模式中，jQuery框架等，前端开发的主要思想是对dom的操作，就jq而言，有着非常优秀的dom选择技巧，例如：$(“#id”),$(“.class”),$(“p:first-child”),$(“div&gt;p”),$(“div p”),$(“div+p”)。可以非常精准的选择到每一个dom标签，并且做到各个浏览器的兼容，这也是前些年jq流行的根基。<br>​        到了后期就会碰到一些性能问题，由于前端数据量非常大，有一个数据更新时，就会刷新整个页面的dom树结构。对dom操作的前端开发模式受到限制，此时，基于数据驱动的前端开发应运而生。整个web页面是一个dom树，基于数据开发的思想是dom只在第一次进行布局设定，后边有新数据更新只用调整数据，不刷新整体页面的dom结构。</p>
</blockquote>
<p>Vue.js 的核心优势是一个允许采用简洁的模板Mustache语法来声明式地将数据渲染进 DOM 的系统，vue支持组件化开发。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">  &#123;&#123; message &#125;&#125;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">var app = new Vue(&#123;</span></span><br><span class="line"><span class="regexp">  el: '#app',</span></span><br><span class="line"><span class="regexp">  data: &#123;</span></span><br><span class="line"><span class="regexp">    message: 'Hello Vue!'</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br></pre></td></tr></table></figure></p>
<h4 id="Vue与-react和angular-的区别"><a href="#Vue与-react和angular-的区别" class="headerlink" title="Vue与(react和angular)的区别"></a>Vue与(react和angular)的区别</h4><p><a href="http://www.shenshuai.me/2018/08/22/React%20%E4%B8%8E%20Vue%20%E5%88%9B%E5%BB%BA%E5%90%8C%E4%B8%80%E6%AC%BE%20App%E7%9A%84%E5%AF%B9%E6%AF%94/" target="_blank" rel="noopener">vue和react的详细对比可以查看另一篇文章</a></p>
<p>vue和angular的对比</p>
<p><strong>不同点</strong></p>
<ul>
<li><p>vue是一个ui框架，只负责构建用户界面。如果做一个大型的应用需要配合vue-router和vuex使用。比angular更加小巧。</p>
</li>
<li><p>vue有组件化概念，angular中没有</p>
</li>
<li><p>vue使用虚拟DOM Virtual DOM</p>
</li>
</ul>
<p><strong>相同点</strong></p>
<ul>
<li>都有指令的定义，vue用v-xxx，angular用ng-xxx</li>
<li>都可以数据绑定，支持双向数据绑定</li>
</ul>
<p>vue更像是建筑过程的一块砖，要构建大型的工程还需配合钢筋还有水泥等。而angular更像是一个已经建筑好的宫殿，一切结构都支持，我们只需要在里面完成需要的‘表演’。vue相对来说使用上更加方便简洁，上手更快。</p>
<h2 id="Vue数据处理"><a href="#Vue数据处理" class="headerlink" title="Vue数据处理"></a>Vue数据处理</h2><h4 id="Vue的模板语法"><a href="#Vue的模板语法" class="headerlink" title="Vue的模板语法"></a>Vue的模板语法</h4><p>数据绑定最常见的形式就是使用“Mustache”语法 (双大括号) 的文本插值：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;Message: &#123;&#123; msg &#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">&lt;p&gt;Using v-html directive: &lt;span v-html="rawHtml"&gt;&lt;/</span>span&gt;<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;div&gt;&#123;&#123; ok ? <span class="string">'YES'</span> : <span class="string">'NO'</span> &#125;&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;p&gt;&#123;&#123; message.split('').reverse().join('') &#125;&#125;&lt;/</span>p&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="Vue的指令"><a href="#Vue的指令" class="headerlink" title="Vue的指令"></a>Vue的指令</h4><p>指令 (Directives) 是带有 v- 前缀的特殊特性。<br>Mustache 语法不能作用在 HTML 特性上，遇到这种情况应该使用 v- 指令：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:id=<span class="string">"dynamicId"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;p v-<span class="keyword">if</span>=<span class="string">"seen"</span>&gt;现在你看到我了&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;p v-if-else="seen"&gt;现在你看到我了&lt;/</span>p&gt;</span><br><span class="line">&lt;ul&gt;<span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in items"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;p v-show=<span class="string">"seen"</span>&gt;现在你看到我了&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;input v-model="username" type="text" /</span>&gt;</span><br><span class="line">&lt;a v-on:click=<span class="string">"doSomething"</span>&gt;...&lt;<span class="regexp">/a&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>v-if和v-show的区别</strong><br>他们都可以控制元素的显示和隐藏，v-if是直接删除掉dom结构，显示的时候在添加dom出来。v-show只是控制dom元素的css属性display的none和block。v-show 的性能要高于v-if。</p>
<h4 id="Vue观察属性watch"><a href="#Vue观察属性watch" class="headerlink" title="Vue观察属性watch"></a>Vue观察属性watch</h4><p>watch可以监听到数据的实时变化,watch是一个属性，按照json的语法，要用watch:{}</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> v-model=<span class="string">"myValue"</span> &gt;</span><br><span class="line">     &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">data ()&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">          myValue: <span class="string">''</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">watch: &#123;</span><br><span class="line">    myValue(newValue, oldValue)&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(newValue);</span><br><span class="line">          <span class="built_in">console</span>.log(oldValue);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>watch观察者属性里面监听的数据是在data中定义的数据，必须在data中先定义。</p>
<p>可以实时监测到数据的更新和变化。</p>
<p><strong>如果是监听一个对象下的所有属性值的变化，则使用</strong></p>
<ul>
<li><p>handler方法</p>
</li>
<li><p>deep属性,深度监听对象内部的所有属性</p>
</li>
<li><p>immediate属性,立即执行结果</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">data ()&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">          myValue: &#123;</span><br><span class="line">              name:<span class="string">""</span>,</span><br><span class="line">              age:<span class="number">16</span> ,</span><br><span class="line">              firstName: <span class="string">'Dawei'</span>,</span><br><span class="line">    		  lastName: <span class="string">'Lou'</span>,</span><br><span class="line">    		  fullName: <span class="string">''</span></span><br><span class="line">          &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">watch: &#123;</span><br><span class="line">    myValue:&#123;</span><br><span class="line">          handler( newValue, oldValue )&#123;</span><br><span class="line">          	<span class="built_in">console</span>.log(newValue);</span><br><span class="line">          	<span class="built_in">console</span>.log(oldValue); </span><br><span class="line">          &#125;,</span><br><span class="line">          deep:<span class="literal">true</span></span><br><span class="line">     &#125;,</span><br><span class="line">    firstName: &#123;</span><br><span class="line">        handler(newName, oldName) &#123;</span><br><span class="line">          <span class="keyword">this</span>.fullName = newName + <span class="string">' '</span> + <span class="keyword">this</span>.lastName;</span><br><span class="line">        &#125;,</span><br><span class="line">    	<span class="comment">// 代表在wacth里声明了firstName这个方法之后立即先去执行handler方法，如果设置了false，那么效果和上边例子一样</span></span><br><span class="line">    	immediate: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Vue计算属性computed"><a href="#Vue计算属性computed" class="headerlink" title="Vue计算属性computed"></a>Vue计算属性computed</h4><p>模板内的表达式非常便利，但是设计它们的初衷是用于简单运算的。<br><del>在模板中放入太多的逻辑会让模板过重且难以维护。</del><br>任何复杂逻辑，你都应当使用计算属性。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Original message: "&#123;&#123; message &#125;&#125;"<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Computed reversed message: "&#123;&#123; reversedMessage &#125;&#125;"<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#example'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: <span class="string">'Hello'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    <span class="comment">// 计算属性的 getter</span></span><br><span class="line">    reversedMessage: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// `this` 指向 vm 实例</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.message.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>当 message 发生改变时，所有依赖 reversedMessage 的绑定也会更新。<br>计算属性是有缓存的，当页面中<strong>多次</strong>使用reversedMessage的时候，都是从缓存中读取，只需计算一次即可。只要所依赖的数据message没有变化，reversedMessage的缓存就不会改变。</p>
<p><u>watch观察者属性通常结合input表单做实时数据的检查。<br>computed计算属性，通常是对data中现存的数据做其它的格式处理的操作。</u></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shenshuai.me/2019/06/17/js正则表达式深度解析/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenshuai.me">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北鸟南游<br>前端开发设计师">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/17/js正则表达式深度解析/" itemprop="url">js正则表达式深度解析</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-17T21:02:33+08:00">
                2019-06-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/前端开发/" itemprop="url" rel="index">
                    <span itemprop="name">前端开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="正则简介和图形化工具使用"><a href="#正则简介和图形化工具使用" class="headerlink" title="正则简介和图形化工具使用"></a>正则简介和图形化工具使用</h2><p>正则表达式是一套匹配固定格式字符串的语法规则。常用来对字符串的查找替换等操作。<br>为了方便学习和使用正则表达式，可以借助图形化工具翻译<br>如网站<a href="https://regexper.com" target="_blank" rel="noopener">regexper</a>可以将表达式转换为图形语义<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\w&#123;3,8&#125;@(\w|\d)&#123;2,5&#125;\.(\w)&#123;2&#125;/</span></span><br></pre></td></tr></table></figure></p>
<p>如下图展示<img src="/images/regex1.png" alt="regex1">正则表达式可以通过对象字面量创建：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d+/</span>;</span><br></pre></td></tr></table></figure></p>
<p>也可以使用构造函数创建 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'\\bhello\\b'</span>,<span class="string">'g'</span>);</span><br></pre></td></tr></table></figure>
<p>正则表达式只有一个test方法，即(正则).<strong>test</strong>(字符串)，其他的为字符串方法如(字符串).<strong>match</strong>(正则)，(字符串).<strong>search</strong>(正则)，(字符串).<strong>replace</strong>(正则)，(字符串).<strong>split</strong>(正则)</p>
<h2 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h2><ul>
<li><p>g: global全局搜索，不添加的话，只搜索到第一个就会停止</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'上海市北京市郑州市'</span>.match(<span class="regexp">/市/</span>,<span class="string">"省"</span>)</span><br><span class="line"><span class="comment">// ["市", index: 2, input: "上海市北京市郑州市", groups: undefined]</span></span><br><span class="line"><span class="string">'上海市北京市郑州市'</span>.match(<span class="regexp">/市/g</span>,<span class="string">"省"</span>)</span><br><span class="line"><span class="comment">//  ["市", "市", "市"]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>i: ignore case 忽略大小写，默认是大小写敏感</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'heLlo worLd'</span>.replace(<span class="regexp">/l/g</span>,<span class="string">"!"</span>)</span><br><span class="line"><span class="string">"heL!o worLd"</span></span><br><span class="line"><span class="string">'heLlo worLd'</span>.replace(<span class="regexp">/l/gi</span>,<span class="string">"!"</span>)</span><br><span class="line"><span class="string">"he!!o wor!d"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>m：multiple line多行搜索 </p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"@123</span></span><br><span class="line"><span class="string">@456</span></span><br><span class="line"><span class="string">@789"</span>.replace(<span class="regexp">/^@./g</span>,<span class="string">"!"</span>)</span><br><span class="line"><span class="string">"!23</span></span><br><span class="line"><span class="string">@456</span></span><br><span class="line"><span class="string">@789"</span></span><br><span class="line"></span><br><span class="line"><span class="string">"@123</span></span><br><span class="line"><span class="string">@456</span></span><br><span class="line"><span class="string">@789"</span>.replace(<span class="regexp">/^@./gm</span>,<span class="string">"!"</span>)</span><br><span class="line"><span class="string">"!23</span></span><br><span class="line"><span class="string">!56</span></span><br><span class="line"><span class="string">!89"</span></span><br></pre></td></tr></table></figure>
<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><p>正则表达是有两种基本字符类型组成</p>
<ul>
<li><p>原义文本字符：如“是”，“s”</p>
</li>
<li><p>元字符:在正则表达式中有特殊含义的非字母字符<br>^ |  $ ? <em> + . \ ( ) { } [ ]<br>|名称|含义|<br>|:—|:–:|<br>| ^ | 匹配输入字符串的开始位置。如果是在[]内，表示否定的意思 |<br>| $ | 匹配字符串结束的位置。 |<br>| . | 匹配除换行符（\n、\r）之外的任何单个字符。 |<br>| \ | 将下一个字符标记为一个特殊字符的引用转义符。 |<br>| </em> | 匹配显示零次或多次 |<br>| + | 匹配显示1次或多次 |<br>| ? | 匹配显示0次或1次 |<br>| \b | 匹配一个单词边界，也就是指单词和空格间的位置。 |<br>| \B | 匹配非单词边界。 |<br>| \d | 匹配一个数字字符。 |<br>| \D |匹配一个非数字字符。 |<br>| \n |匹配一个换行符。 |<br>| \r | 匹配一个回车符 |<br>| \s | 匹配任何空白字符，包括空格、制表符、换页符等等。 |<br>| \S | 匹配任何非空白字符。 |<br>| \w | 匹配字母、数字、下划线。 |<br>| \W | 匹配非字母、数字、下划线。 |</p>
<p><strong>\b</strong>  匹配边界值<br><img src="/images/regex2.png" alt="regex2"></p>
</li>
</ul>
<p>“hello world lo”.replace(/lo\b/g,”!”)       &gt;   “hel! world !”</p>
<p>“hello world lo”.replace(/\Blo\b/g,”!”)   &gt;   “hel! world lo”</p>
<p>  <strong>\w</strong><br>  <img src="/images/regex3.png" alt="regex3"><br>  <strong>\d</strong><br>  <img src="/images/regex4.png" alt="regex4"></p>
<h2 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h2><p>一般情况下正则字符匹配的是一个字符串。如果匹配一类特性的字符，要创建一个特定的字符类，元字符[]可以把一些字符归为一类，表达式可以匹配这一类的字符。</p>
<p>如果使用/[hello]/,匹配到单独的或h、或e、或l、或o单个字母<br>/hello/匹配到完整的hello单词</p>
<p>/[hello]/<br> <img src="/images/regex5.png" alt="regex5"><br>/hello/<br> <img src="/images/regex6.png" alt="regex6"></p>
<p> <strong>在字符类里面写上^表示否定</strong></p>
<p>[^hello]<br> <img src="/images/^hello.png" alt="^hello"></p>
<h2 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h2><p>{20}匹配20次<br>{4,}至少4次<br>{1,5}1次到5次<br>{0,8} 0次到8次<br>? 零次或一次，最多一次<br>+一次或多次，至少一次<br>*零次或者多次</p>
<h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><p>可以使用()对要匹配的内容进行分组<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"a1a2a3a4"</span>.replace(<span class="regexp">/\w\d&#123;3&#125;/g</span>,<span class="string">"X"</span>)</span><br><span class="line"><span class="comment">// 匹配不到结果 "a1a2a3a4"</span></span><br><span class="line"><span class="string">"a1a2a3a4"</span>.replace(<span class="regexp">/(\w\d)&#123;3&#125;/g</span>,<span class="string">"X"</span>)</span><br><span class="line"><span class="comment">//可以匹配字母加数字的重复3次  "Xa4"</span></span><br></pre></td></tr></table></figure></p>
<p>分组常用于改变数据格式，反向引用<br>$代表分组的内容，$1表示第一组，$2表示第二组<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"2019-08-06"</span>.replace(<span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/g</span>,<span class="string">"$2/$3/$1"</span>)</span><br><span class="line"><span class="comment">// "08/06/2019"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="范围类"><a href="#范围类" class="headerlink" title="范围类"></a>范围类</h2><p>正则表达式里有创建字符类，可以用来匹配一类字符，如[0123456789],这样会造成书写困难不雅观。可以直接写成[0-9],字母可以写成[a-z]。这是一个闭区间，包含了两头的字符。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"2019-05-01"</span>.replace(<span class="regexp">/[0-9]/g</span>,<span class="string">"x"</span>)  =&gt;  <span class="string">"xxxx-xx-xx"</span></span><br><span class="line"><span class="string">"2019-05-01"</span>.replace(<span class="regexp">/[0-9-]/g</span>,<span class="string">"x"</span>)  =&gt; <span class="string">"xxxxxxxxxx"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="贪婪模式和非贪婪模式"><a href="#贪婪模式和非贪婪模式" class="headerlink" title="贪婪模式和非贪婪模式"></a>贪婪模式和非贪婪模式</h2><p>正则表达式会尽可能多的匹配，默认贪婪模式<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"1234567"</span>.replace(<span class="regexp">/\d&#123;3,5&#125;/g</span>,<span class="string">"X"</span>)</span><br><span class="line"><span class="comment">// "X67"</span></span><br></pre></td></tr></table></figure></p>
<p>将贪婪模式转为非贪婪模式，只需要在量词后加?<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"1234567"</span>.replace(<span class="regexp">/\d&#123;3,5&#125;?/g</span>,<span class="string">"X"</span>)</span><br><span class="line"><span class="comment">// "XX7"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="前瞻"><a href="#前瞻" class="headerlink" title="前瞻"></a>前瞻</h2><p>正则表达式从文本左边往右边匹配解析，向右边的方向称作“前”<br>从右往左匹配称作“后”<br><strong>正向前瞻</strong>  exp(?=assert)  当符合了第一个表达式后，继续向右查看是否符合断言部分（也是正则表达式），符合了则为匹配<br><strong>负向前瞻</strong>  exp(?!assert)   当符合了第一个表达式后，继续向右查看是否符合断言部分（也是正则表达式），不符合断言，则为匹配</p>
<p><strong><u>断言部分不参与替换</u></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"123wfor!dword789"</span>.replace(<span class="regexp">/\d&#123;3&#125;(?!(w))/g</span>,<span class="string">"N"</span>)</span><br><span class="line"><span class="comment">// "123wfor!dwordN" 匹配到789并替换成N，因为123后面是w，不符合断言部分的后边不是w条件</span></span><br><span class="line"><span class="string">"123wfor!dword789"</span>.replace(<span class="regexp">/\d&#123;3&#125;(?!(f))/g</span>,<span class="string">"N"</span>)</span><br><span class="line"><span class="comment">// "Nwfor!dwordN"  匹配到123和789，断言是后边不能是f，都符合条件</span></span><br><span class="line"><span class="string">"123wfor!dword789"</span>.replace(<span class="regexp">/\d&#123;3&#125;((?!(for)).)*$/g</span>,<span class="string">"N"</span>)</span><br><span class="line"><span class="comment">//"123wfor!dwordN" 匹配到了789，因为123后边包含了for单词   </span></span><br><span class="line"><span class="comment">// (assert.)*$表示以任意字符结尾往左查找，来判断断言部分的内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ((?!word).)*$ 表示字符串中不能包含word的断言</span></span><br><span class="line"><span class="string">"123wfor!dword789"</span>.replace(<span class="regexp">/\d&#123;3&#125;((?!(word)).)*$/g</span>,<span class="string">"N"</span>)</span><br><span class="line"><span class="comment">//"123wfor!dwordN"</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shenshuai.me/2019/05/24/使用node的express框架搭建的webSocket请求/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenshuai.me">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北鸟南游<br>前端开发设计师">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/24/使用node的express框架搭建的webSocket请求/" itemprop="url">使用node的express框架搭建的webSocket请求</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-24T17:42:33+08:00">
                2019-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/前端开发/" itemprop="url" rel="index">
                    <span itemprop="name">前端开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="使用ws创建WebSocket服务"><a href="#使用ws创建WebSocket服务" class="headerlink" title="使用ws创建WebSocket服务"></a>使用ws创建WebSocket服务</h1><h2 id="新建package-json，用于安装ws"><a href="#新建package-json，用于安装ws" class="headerlink" title="新建package.json，用于安装ws"></a>新建package.json，用于安装ws</h2><p>执行npm init -y生成package.json<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"name"</span>: <span class="string">"echo"</span>,</span><br><span class="line">	<span class="attr">"version"</span>: <span class="string">"0.0.1"</span>,</span><br><span class="line">	<span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">		<span class="attr">"express"</span>: <span class="string">"4.17.0"</span>,</span><br><span class="line">		<span class="attr">"ws"</span>: <span class="string">"^7.0.0"</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>执行$npm install 命令安装依赖包</p>
<p>创建一个server.js。作为项目启动的服务器，新建一个public文件夹，用来放置静态文件。<br>以下是server.js的内容<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">var</span> WebSocket = <span class="built_in">require</span>(<span class="string">"ws"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//这一部分不能使用express创建服务的简写方法。</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> server = http.createServer(app);</span><br><span class="line"><span class="keyword">var</span> wss = <span class="keyword">new</span> WebSocket.Server(&#123;server&#125;)</span><br><span class="line"></span><br><span class="line">app.use(express.static(__dirname + <span class="string">"/public"</span>))</span><br><span class="line"></span><br><span class="line">wss.on(<span class="string">"connection"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">ws</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"连接成功"</span>);</span><br><span class="line">  ws.on(<span class="string">"message"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"接收到客户端的数据："</span>+data);</span><br><span class="line">    <span class="comment">// 后台接收到前端的数据后，向前端发送数据</span></span><br><span class="line">    ws.send(<span class="string">"server返回的："</span>+data)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(<span class="number">1688</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"服务器启动成功，通过1688端口访问"</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>在public文件夹下，创建index.html文件<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>websocket echo<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h2</span>&gt;</span>latency: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"latency"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>ms<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lastMessage;</span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	ws = <span class="keyword">new</span> WebSocket(<span class="string">'ws://127.0.0.1:1688'</span>);</span><br><span class="line">	ws.onopen = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">		ping();   </span><br><span class="line">	&#125;;</span><br><span class="line">	ws.onclose = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;<span class="comment">//当链接关闭的时候触发</span></span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line">	ws.onmessage = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;<span class="comment">//后台返回消息的时候触发</span></span><br><span class="line">		<span class="built_in">console</span>.log(e.data);</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">new</span> <span class="built_in">Date</span> - lastMessage&gt;<span class="number">20</span>)&#123;</span><br><span class="line">			<span class="built_in">document</span>.getElementById(<span class="string">"latency"</span>).innerHTML = <span class="string">"响应时间过长，停止请求"</span>;</span><br><span class="line">			ws.close();</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">document</span>.getElementById(<span class="string">"latency"</span>).innerHTML = <span class="keyword">new</span> <span class="built_in">Date</span> - lastMessage;</span><br><span class="line">		setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">"计算出耗时之后，2s再发一次请求"</span>);</span><br><span class="line">			ping();</span><br><span class="line">		&#125;,<span class="number">2000</span>)</span><br><span class="line">	&#125;;</span><br><span class="line">	ws.onerror = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;<span class="comment">//错误情况触发</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">ping</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			lastMessage = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">			ws.send(<span class="string">"ping"</span>);   <span class="comment">//向后台发送数据</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后可以使用node server.js启动服务，打开index.html文件就可以看到websocket发送和接收的数据。</p>
<h2 id="只使用ws创建服务"><a href="#只使用ws创建服务" class="headerlink" title="只使用ws创建服务"></a>只使用ws创建服务</h2><p>单独使用ws创建服务，然后直接在浏览器打开index.html即可访问。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> WebSocket = <span class="built_in">require</span>(<span class="string">'ws'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> WebSocketServer = WebSocket.Server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wss = <span class="keyword">new</span> WebSocketServer(&#123;</span><br><span class="line">    port: <span class="number">1688</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">wss.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">ws</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"连接成功"</span>);</span><br><span class="line">    ws.on(<span class="string">"message"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"接收到客户端的数据："</span> + data);</span><br><span class="line">        <span class="comment">// 后台接收到前端的数据后，向前端发送数据</span></span><br><span class="line">        ws.send(<span class="string">"server返回的："</span> + data)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'ws server started at port 1688...'</span>);</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shenshuai.me/2019/05/15/webpackDevLibrary/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shenshuai.me">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="北鸟南游<br>前端开发设计师">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/15/webpackDevLibrary/" itemprop="url">webpackDevLibrary</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-15T15:03:33+08:00">
                2019-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/前端开发/" itemprop="url" rel="index">
                    <span itemprop="name">前端开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="使用webpack开发一个npm包，并发布到npmjs"><a href="#使用webpack开发一个npm包，并发布到npmjs" class="headerlink" title="使用webpack开发一个npm包，并发布到npmjs"></a>使用webpack开发一个npm包，并发布到npmjs</h1><h2 id="创建webpack开发环境-设置package-json"><a href="#创建webpack开发环境-设置package-json" class="headerlink" title="创建webpack开发环境,设置package.json"></a>创建webpack开发环境,设置package.json</h2><p>执行npm init -y生成package.json<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"num-word-chinese"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"将数字转成英文单词或者中文大写"</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"dist/num-word-chinese.js"</span>,</span><br><span class="line">  <span class="attr">"module"</span>: <span class="string">"src/index.js"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"webpack"</span>: <span class="string">"^4.31.0"</span>,</span><br><span class="line">    <span class="attr">"webpack-cli"</span>: <span class="string">"^3.3.2"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"lodash"</span>: <span class="string">"^4.17.11"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>main指定访问生成的js插件的入口</li>
<li>module将js包添加为标准模块</li>
<li>devDependencies，编译生成js包所需的开发依赖包，这里面引用的包，使用者使用安装该js时，不会下载这些依赖。</li>
<li>dependencies，js包运行所需的依赖包，这里面引用的包，使用者使用安装该js时，会自动下载这些依赖。</li>
</ul>
<h2 id="创建webpack-config-js修改配置"><a href="#创建webpack-config-js修改配置" class="headerlink" title="创建webpack.config.js修改配置"></a>创建webpack.config.js修改配置</h2><h3 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h3><p>现在，让我们以某种方式打包这个 library，能够实现以下几个目标：</p>
<ul>
<li>使用 externals 选项，避免将 lodash 打包到应用程序，而使用者会去加载它。</li>
<li>将 library 的名称设置为 num-word-chinese。</li>
<li>将 library 暴露为一个名为 numWordChinese 的变量。</li>
<li>能够访问其他 Node.js 中的 library。</li>
</ul>
<p>此外，consumer(使用者) 应该能够通过以下方式访问 library：</p>
<ul>
<li>ES2015 模块。例如 import numWordChinese from ‘num-word-chinese’。</li>
<li>CommonJS 模块。例如 require(‘num-word-chinese’).</li>
<li>全局变量，在通过 script 标签引入时</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'num-word-chinese.js'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="外部化lodash"><a href="#外部化lodash" class="headerlink" title="外部化lodash"></a>外部化lodash</h3><p>现在，如果执行 webpack，你会发现创建了一个体积相当大的文件。如果你查看这个文件，会看到 lodash 也被打包到代码中。在这种场景中，我们更倾向于把 lodash 当作 peerDependency。也就是说，consumer(使用者) 应该已经安装过 lodash 。因此，你就可以放弃控制此外部 library ，而是将控制权让给使用 library 的 consumer。</p>
<p>这可以使用 externals 配置来完成：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'num-word-chinese.js'</span></span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> externals: &#123;</span><br><span class="line">   lodash: &#123;</span><br><span class="line">     commonjs: <span class="string">'lodash'</span>,</span><br><span class="line">     commonjs2: <span class="string">'lodash'</span>,</span><br><span class="line">     amd: <span class="string">'lodash'</span>,</span><br><span class="line">     root: <span class="string">'_'</span></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="暴露-library"><a href="#暴露-library" class="headerlink" title="暴露 library"></a>暴露 library</h3><p>对于用法广泛的 library，我们希望它能够兼容不同的环境，例如 CommonJS，AMD，Node.js 或者作为一个全局变量。为了让你的 library 能够在各种使用环境中可用，需要在 output 中添加 library 属性：<br>library: ‘numWordChinese’<br>将你的 library bundle 暴露为名为 numWordChinese 的全局变量，consumer 通过此名称来 import。为了让 library 和其他环境兼容，则需要在配置中添加 libraryTarget 属性。这个选项可以控制以不同形式暴露 library。最重要的模块输出选项应该是 libraryTarget ，它是用来决定模块以何种规范输出，在全局变量的 Name 是啥。其基本格式为：</p>
<p>output.libraryTarget[String]: var | assign | this | window | global | commonjs | commonjs2 | amd | umd<br>上面那些全部是都是可选项值。这里先告诉大家，在现代 JS 的写法中，最后一个 umd 的选项是最常用的。<br>libraryTarget: ‘umd’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'num-word-chinese.js'</span>,</span><br><span class="line">        library: <span class="string">'numWordChinese'</span>,</span><br><span class="line">        libraryTarget: <span class="string">'umd'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    externals: &#123;</span><br><span class="line">        lodash: &#123;</span><br><span class="line">            commonjs: <span class="string">'lodash'</span>,</span><br><span class="line">            commonjs2: <span class="string">'lodash'</span>,</span><br><span class="line">            amd: <span class="string">'lodash'</span>,</span><br><span class="line">            root: <span class="string">'_'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="添加npm包的应用功能"><a href="#添加npm包的应用功能" class="headerlink" title="添加npm包的应用功能"></a>添加npm包的应用功能</h2><p>src/index.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span>;</span><br><span class="line"><span class="keyword">import</span> numRef <span class="keyword">from</span> <span class="string">'./ref.json'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">numToWord</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> _.reduce(numRef, (accum, ref) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> ref.num === num ? ref.word : accum;</span><br><span class="line">  &#125;, <span class="string">''</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">numToChinese</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> _.reduce(numRef, (accum, ref) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> ref.num === num ? ref.chinese : accum;</span><br><span class="line">  &#125;, <span class="string">''</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">wordToNum</span>(<span class="params">word</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> _.reduce(numRef, (accum, ref) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> ref.word === word &amp;&amp; word.toLowerCase() ? ref.num : accum;</span><br><span class="line">  &#125;, <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">chineseCurrency</span>(<span class="params">number</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> chineseNumber = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">var</span> num = [<span class="string">"零"</span>, <span class="string">"壹"</span>, <span class="string">"贰"</span>, <span class="string">"叁"</span>, <span class="string">"肆"</span>, <span class="string">"伍"</span>, <span class="string">"陆"</span>, <span class="string">"柒"</span>, <span class="string">"捌"</span>, <span class="string">"玖"</span> ];</span><br><span class="line">  <span class="keyword">var</span> unit = [<span class="string">"分"</span>, <span class="string">"角"</span>, <span class="string">"圆"</span>, <span class="string">"拾"</span>, <span class="string">"佰"</span>, <span class="string">"仟"</span>, <span class="string">"万"</span>, <span class="string">"拾"</span>, <span class="string">"佰"</span>, <span class="string">"仟"</span>, <span class="string">"亿"</span>, <span class="string">"拾"</span>, <span class="string">"佰"</span>, <span class="string">"仟"</span>, <span class="string">"万"</span> ];</span><br><span class="line">  <span class="keyword">var</span> tempNumber = <span class="built_in">Math</span>.round(number * <span class="number">100</span>) + <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">var</span> tempNumberLength = tempNumber.length;</span><br><span class="line">  <span class="keyword">if</span>(<span class="string">"0"</span> === tempNumber)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"零元整"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(tempNumberLength &gt; <span class="number">15</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"超出转化范围"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> preReadZero = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = tempNumberLength; i &gt; <span class="number">0</span>; i--)&#123;</span><br><span class="line">    <span class="keyword">if</span> ((tempNumberLength - i + <span class="number">2</span>) % <span class="number">4</span> == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i - <span class="number">4</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="string">"0000"</span> === tempNumber.substring(i - <span class="number">4</span>, i)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!preReadZero) &#123;</span><br><span class="line">          chineseNumber = <span class="string">"零"</span> + chineseNumber  ;</span><br><span class="line">          preReadZero = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        i -= <span class="number">3</span>; </span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      preReadZero = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> digit = <span class="built_in">parseInt</span>(tempNumber.substring(i - <span class="number">1</span>, i), <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">if</span> (digit == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!preReadZero) &#123;</span><br><span class="line">        chineseNumber = <span class="string">"零"</span> + chineseNumber  ;</span><br><span class="line">        preReadZero = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> ((tempNumberLength - i + <span class="number">2</span>) % <span class="number">4</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        chineseNumber = unit[tempNumberLength - i] + chineseNumber  ;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      chineseNumber = num[digit] + unit[tempNumberLength - i] + chineseNumber;</span><br><span class="line">      preReadZero = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (tempNumberLength - <span class="number">2</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="string">"00"</span> === tempNumber.substring(tempNumberLength - <span class="number">2</span>, tempNumberLength))&#123;</span><br><span class="line">    chineseNumber += <span class="string">"整"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> chineseNumber;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>numToWord数字转英文</li>
<li>numToChinese数字转中文</li>
<li>chineseCurrency数字转金融货币写法</li>
</ul>
<h2 id="使用npm-publish发布包"><a href="#使用npm-publish发布包" class="headerlink" title="使用npm publish发布包"></a>使用npm publish发布包</h2><p>安装好webpack和webpack-cli<br>执行webpack命令将src/index.js打包到dist/num-word-chinese.js<br>登录npm，第一次登录npm adduser；<br>以后登录npm login<br>登录成功之后，执行npm publish发布程序包</p>
<h2 id="测试包的使用"><a href="#测试包的使用" class="headerlink" title="测试包的使用"></a>测试包的使用</h2><p>发布成功后，可以npm install –save-dev num-word-chinese安装包<br>初始化一套支持Es6的webpack环境进行测试</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> numWordChinese <span class="keyword">from</span> <span class="string">'num-word-chinese'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(numWordChinese.numToWord(<span class="number">8</span>));</span><br><span class="line"><span class="built_in">console</span>.log(numWordChinese.numToChinese(<span class="number">3</span>));</span><br><span class="line"><span class="built_in">console</span>.log(numWordChinese.chineseCurrency(<span class="number">88845</span>));</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="shenshuai.me">
            
              <p class="site-author-name" itemprop="name">shenshuai.me</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">32</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/shenshuai89" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/beiniaonanyou" target="_blank" title="sina">
                      
                        <i class="fa fa-fw fa-weibo"></i>sina</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:shenshuai89@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://jsfiddle.net/user/shenshuai" target="_blank" title="jsfiddle">
                      
                        <i class="fa fa-fw fa-jsfiddle"></i>jsfiddle</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shenshuai.me</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
